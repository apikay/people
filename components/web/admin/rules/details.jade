extends ./../../layouts/admin

block head
    title Rules / Details
    link(rel='stylesheet', href='/views/admin/rules/details.min.css?#{cacheBreaker}')

block feet
    script(src='/views/admin/rules/details.min.js?#{cacheBreaker}')

block body
    div.row
        div.col-xs-12
            div#header
            fieldset
                div#details
            fieldset
                div#delete
    script(type='text/template', id='tmpl-header')
        div.page-header
            h1
                a(href='/admin/rules/') Rules
                |  / <%- name %>
    script(type='text/template', id='tmpl-details')
        legend Details
        div.alerts
            | <% _.each(errors, function(err) { %>
            div.alert.alert-danger.alert-dismissable
                button.close(type='button', data-dismiss='alert') &times;
                | <%- err %>
            | <% }); %>
            | <% if (success) { %>
            div.alert.alert-info.alert-dismissable
                button.close(type='button', data-dismiss='alert') &times;
                | Changes have been saved.
            | <% } %>
        div.form-role(class!='<%- errfor.name ? "has-error" : "" %>')
            label Name:
            input.form-control(type='text', name='name', value!='<%= name %>')
            span.help-block <%- errfor.name %>

        div.form-role(class!='<%- errfor.on ? "has-error" : "" %>')
            label On:
            select.form-control(name='ON')
                option(value='userCreated') User Created
                option(value='userUpdated') User Updated
                option(value='userDeleted') User Deleted
                option(value='userLoggedIn') User Logged In
                option(value='userLoggedOut') User Logged Out
                option(value='userGotRole') User Got Role
                option(value='userLostRole') User Lost Role
                option(value='userStatusChanged') User Status Changed
                option(value='userPasswordChanged') User Password Changed
                option(value='userVerified') User Verified
            span.help-block <%- errfor.on %>

        div.form-role(class!='<%- errfor.if ? "has-error" : "" %>')
            label If User's:
            select.form-control(name='IF')
                option(value='email') Email
                option(value='name') Name
                option(value='role') Role
                option(value='status') Status
                option(value='isActive') Is Active
            span.help-block <%- errfor.if %>

        div.form-role(class!='<%- errfor.is ? "has-error" : "" %>')
            label Is:
            input.form-control(type='text', name='is', value!='<%= is %>')
            span.help-block <%- errfor.is %>

        div.form-role(class!='<%- errfor.do ? "has-error" : "" %>')
            label Do:
            select.form-control(name='DO')
                option(value='webhook') Email
                option(value='addRole') Name
                option(value='removeRole') Role
                option(value='activate') Status
                option(value='inactivate') Is Active
                option(value='setStatus') Is Active
                option(value='addNote') Is Active
            span.help-block <%- errfor.do %>


        div.form-role
            button.btn.btn-primary.btn-update(type='button') Update
    script(type='text/template', id='tmpl-delete')
        legend Danger Zone
        div.alerts
            | <% _.each(errors, function(err) { %>
            div.alert.alert-danger.alert-dismissable
                button.close(type='button', data-dismiss='alert') &times;
                | <%- err %>
            | <% }); %>
        div.form-role
            span.help-block
                span.label.label-danger If you do this, it cannot be undone.
                | &nbsp;
                span.text-muted You may also create orphaned document relationships too.
        div.form-role
            button.btn.btn-danger.btn-delete(type='button') Delete

    script(type='text/template', id='data-record') !{data.record}
